---
title: Testing Rules (테스트 규칙)
scope: workspace
applies_to: [all]
severity_levels: [MUST, SHOULD]
description: 테스트 구조/명명/실데이터/스냅샷 규칙
version: v1
@cursor-change: 2025-10-25, 0.1.0, add testing rules
---

## 목적

테스트 구조/명명/실행 원칙을 통일하여 신뢰도 높은 검증을 보장합니다.

## 원칙

- 프로토타입(.mjs)과 정규(.ts) 테스트를 분리하고 목적에 맞는 위치 사용
- 실제 API/실데이터 기반 검증 원칙, 캐시 결과는 cache/\*\*에 보관
- 스냅샷/계약 테스트로 회귀 방지

## 규칙

- [MUST] TST-01 테스트 디렉터리: `tests/` 하위 카테고리 구조를 따릅니다.
- [MUST] TST-02 테스트 파일명: `{module}.test.mjs|.test.ts` 규칙을 따릅니다.
- [MUST] TST-03 실 API 기반 테스트는 가상 데이터 금지, 실제 응답을 사용하며 결과는 `cache/api-test-results/`에 저장합니다.
- [MUST] TST-04 API 테스트 구조는 `tests/api/lostark-api/V{version}/`를 따릅니다.
- [MUST] TST-05 UDP/REST/DTO 계약은 스냅샷 테스트를 유지합니다.
- [SHOULD] TST-06 공통 유틸은 `tests/common/`으로 통합합니다.

## 예외/경계

- 외부 API 제한으로 테스트가 불가한 경우, 재현 가능한 최소 시나리오와 캐시 스냅샷을 제공하고 주석으로 사유를 명시합니다.

## 레퍼런스

- tests/README.md, tests/MIGRATION-REPORT.md
- Docs/lostark-api/V9.0.0/README.md

## 변경 이력

- 2025-10-25: 신규 생성(TST-01~06)
