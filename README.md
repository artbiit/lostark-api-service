# Lost Ark API Service

3ê³„ì¸µ ì•„í‚¤í…ì²˜ ê¸°ë°˜ì˜ Lost Ark API í†µí•© ì„œë¹„ìŠ¤

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UDP Gateway   â”‚    â”‚   REST API      â”‚    â”‚   Fetch Layer   â”‚
â”‚   (3ê³„ì¸µ)        â”‚    â”‚   (2ê³„ì¸µ)        â”‚    â”‚   (1ê³„ì¸µ)        â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ì´ˆì €ì§€ì—° ì „ì†¡   â”‚    â”‚ â€¢ ì •ê·œí™”ëœ ë°ì´í„° â”‚    â”‚ â€¢ ì™¸ë¶€ API í˜¸ì¶œ  â”‚
â”‚ â€¢ ê¸°ì¡´ ë©”ì‹œì§€     â”‚    â”‚ â€¢ í•„ìš”ì‹œ Fetch   â”‚    â”‚ â€¢ ë°ì´í„° ì •ê·œí™”  â”‚
â”‚   ê·œê²© ìœ ì§€      â”‚    â”‚   í˜¸ì¶œ          â”‚    â”‚ â€¢ ìºì‹±          â”‚
â”‚ â€¢ Lock-free í   â”‚    â”‚ â€¢ Fastify ê¸°ë°˜  â”‚    â”‚ â€¢ ìŠ¤ì¼€ì¤„ëŸ¬      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. í™˜ê²½ ì„¤ì •

```bash
# í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ë³µì‚¬
cp .env.example .env

# .env íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ ì‹¤ì œ ê°’ìœ¼ë¡œ ìˆ˜ì •
# íŠ¹íˆ LOSTARK_API_KEYëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤
```

#### í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜

- `LOSTARK_API_KEY`: Lost Ark Developer Portalì—ì„œ ë°œê¸‰ë°›ì€ API í‚¤
  - https://developer-lostark.game.onstove.com/ ì—ì„œ ë°œê¸‰

#### ì£¼ìš” ì„¤ì •

- **Fetch Layer**: API í˜¸ì¶œ ì œí•œ, ì¬ì‹œë„, ì„œí‚·ë¸Œë ˆì´ì»¤
- **REST API**: í¬íŠ¸, CORS, ë ˆì´íŠ¸ë¦¬ë°‹
- **UDP Gateway**: í¬íŠ¸, ë©”ì‹œì§€ í¬ê¸°, ì›Œì»¤ í’€
- **ìºì‹œ**: Redis ì—°ê²°, TTL ì„¤ì •
- **ë¡œê¹…**: ë¡œê·¸ ë ˆë²¨, í¬ë§·

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
yarn install
```

### 3. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
# ëª¨ë“  íŒ¨í‚¤ì§€ ë¹Œë“œ
yarn build

# ê°œë°œ ëª¨ë“œ (watch)
yarn dev

# Fetch Layer ì‹œì‘
yarn start
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
lostark-remote-kakao/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/                    # ê³µí†µ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ config/           # í™˜ê²½ì„¤ì •, ë¡œê¹…
â”‚   â”‚   â”‚   â”œâ”€â”€ types/            # íƒ€ì… ì •ì˜ (ë²„ì „ë³„)
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/            # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”‚   â””â”€â”€ db/               # ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ fetch/                     # 1ê³„ì¸µ: Fetch & Normalize
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ clients/           # Lost Ark API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ normalizers/       # ë°ì´í„° ì •ê·œí™”
â”‚   â”‚   â”‚   â”œâ”€â”€ cache/             # ìºì‹œ ê´€ë¦¬
â”‚   â”‚   â”‚   â””â”€â”€ scheduler.ts       # ìŠ¤ì¼€ì¤„ëŸ¬
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ rest-api/                  # 2ê³„ì¸µ: REST API
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ routes/            # Fastify ë¼ìš°íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ middleware/        # ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”‚   â””â”€â”€ plugins/           # Fastify í”ŒëŸ¬ê·¸ì¸
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ udp-gateway/               # 3ê³„ì¸µ: UDP Gateway
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ handlers/          # ë©”ì‹œì§€ í•¸ë“¤ëŸ¬
â”‚       â”‚   â”œâ”€â”€ queue/             # lock-free í
â”‚       â”‚   â””â”€â”€ workers/           # ì›Œì»¤ í’€
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ cache/                         # ìºì‹œ ë°ì´í„°
â”œâ”€â”€ Docs/                          # ë¬¸ì„œ
â””â”€â”€ tools/                         # ê°œë°œ ë„êµ¬
```

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **Runtime**: Node.js 22+ (ESM)
- **Language**: TypeScript (strict mode)
- **Package Manager**: Yarn Workspaces
- **HTTP Server**: Fastify
- **Logging**: Pino
- **Validation**: Zod
- **Database**: MySQL2
- **Cache**: Redis (ì„ íƒì‚¬í•­)

## ğŸ“Š ì„±ëŠ¥ ëª©í‘œ

- **REST API**: p95 â‰¤ 50ms (ìºì‹œ íˆíŠ¸ ê¸°ì¤€)
- **UDP Gateway**: p95 â‰¤ 10ms (ìºì‹œ íˆíŠ¸ ê¸°ì¤€)
- **Fetch Layer**: ì‹±ê¸€í”Œë¼ì´íŠ¸, ì„œí‚·ë¸Œë ˆì´ì»¤, ì§€ìˆ˜ë°±ì˜¤í”„ ì¬ì‹œë„

## ğŸ›¡ï¸ ì•ˆì •ì„±

- **Graceful Degrade**: ì™¸ë¶€ API ì¥ì•  ì‹œ ìºì‹œ ì„œë¹™
- **Circuit Breaker**: ì™¸ë¶€ API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ìë™ ì°¨ë‹¨
- **Rate Limiting**: RESTì™€ Fetch ë¶„ë¦¬ ê´€ë¦¬
- **Error Handling**: ëª…í™•í•œ ì—ëŸ¬ ì½”ë“œì™€ ë©”ì‹œì§€

## ğŸ“ ê°œë°œ ê°€ì´ë“œ

ìì„¸í•œ ê°œë°œ ê°€ì´ë“œëŠ” [Docs/development-guide.md](Docs/development-guide.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ISC License
